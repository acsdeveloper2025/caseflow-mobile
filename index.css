@tailwind base;
@tailwind components;
@tailwind utilities;

/* Brand color utilities */
@layer utilities {
  .bg-brand-primary {
    background-color: #00a950;
  }
  .bg-brand-secondary {
    background-color: #008a44;
  }
  .border-brand-primary {
    border-color: #00a950;
  }
  .hover\:bg-brand-secondary:hover {
    background-color: #008a44;
  }
}

/* Default text colors for dark theme */
@layer base {
  /* Ensure all text elements have proper colors on dark background */
  p, span, div {
    color: #F9FAFB; /* light-text */
  }

  /* Default header colors - but allow utilities to override */
  h1, h2, h3, h4, h5, h6 {
    color: #F9FAFB; /* light-text */
  }
}

/* Brand color utilities with higher specificity */
@layer utilities {
  .text-brand-primary {
    color: #00a950 !important;
  }
  .text-brand-secondary {
    color: #008a44 !important;
  }
}

html, body, #root {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: auto;
  background-color: #111827; /* dark-bg */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;

  /* Remove automatic safe area padding from root - handle it per component */
  /* Ensure full viewport coverage */
  min-height: 100vh;
  min-height: -webkit-fill-available;
}

/* Support for safe area insets on web */
@supports (padding: max(0px)) {
  html {
    /* Enable safe area support */
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }

  body, #root {
    /* Reset padding for body and root to let components handle safe areas */
    padding: 0;
  }
}

/* Custom scrollbar styles for form content */
.custom-scrollbar::-webkit-scrollbar {
  width: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: #1F2937;
  border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #4B5563;
  border-radius: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #6B7280;
}

/* Ensure proper scrolling for main content areas */
body {
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

/* Ensure React Native Web FlatList can scroll properly */
[data-focusable="true"] {
  overflow: auto !important;
}

/* Mobile container safe area handling */
.mobile-container {
  /* Ensure proper safe area handling on web */
  padding-top: env(safe-area-inset-top);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  /* Don't add bottom padding here - let BottomNavigation handle it */
}

/* Viewport meta tag support for mobile devices */
@media screen and (max-width: 768px) {
  .mobile-container {
    /* Ensure content doesn't get hidden behind notches */
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
}

/* Custom scrollbar for main content */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #111827;
}

::-webkit-scrollbar-thumb {
  background: #374151;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #4B5563;
}

/* Compact image display system - force thumbnail sizes */
.compact-image-thumbnail {
  width: 64px !important;
  height: 64px !important;
  min-width: 64px !important;
  min-height: 64px !important;
  max-width: 64px !important;
  max-height: 64px !important;
  object-fit: cover !important;
  display: block !important;
}

.compact-image-container {
  width: 64px !important;
  height: 64px !important;
  min-width: 64px !important;
  min-height: 64px !important;
  max-width: 64px !important;
  max-height: 64px !important;
  flex-shrink: 0 !important;
  position: relative !important;
  border-radius: 8px !important;
  overflow: hidden !important;
}

/* Mobile-specific adjustments */
@media (max-width: 768px) {
  .compact-image-thumbnail {
    width: 56px !important;
    height: 56px !important;
    min-width: 56px !important;
    min-height: 56px !important;
    max-width: 56px !important;
    max-height: 56px !important;
  }

  .compact-image-container {
    width: 56px !important;
    height: 56px !important;
    min-width: 56px !important;
    min-height: 56px !important;
    max-width: 56px !important;
    max-height: 56px !important;
  }
}

/* Mobile-specific safe area and layout utilities */
.safe-area-container {
  padding-top: max(4px, env(safe-area-inset-top));
  padding-bottom: max(4px, env(safe-area-inset-bottom));
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

.safe-area-top {
  padding-top: max(2px, env(safe-area-inset-top));
}

.safe-area-bottom {
  padding-bottom: max(2px, env(safe-area-inset-bottom));
}

.safe-area-left {
  padding-left: env(safe-area-inset-left);
}

.safe-area-right {
  padding-right: env(safe-area-inset-right);
}

/* Mobile viewport utilities */
.mobile-container {
  width: 100%;
  min-height: 100vh;
  min-height: -webkit-fill-available;
  position: relative;
  overflow-x: hidden;
}

.mobile-content {
  padding-bottom: calc(80px + max(4px, env(safe-area-inset-bottom))); /* Bottom nav + minimal safe area */
  min-height: calc(100vh - max(4px, env(safe-area-inset-top)) - max(4px, env(safe-area-inset-bottom)));
}

.mobile-header {
  position: sticky;
  top: max(2px, env(safe-area-inset-top));
  z-index: 100;
  background-color: #111827;
  border-bottom: 1px solid #374151;
}

.mobile-bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  padding-bottom: max(4px, env(safe-area-inset-bottom));
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  background-color: #1f2937;
  border-top: 1px solid #374151;
}

/* Responsive design utilities */
@media (max-width: 640px) {
  .mobile-padding {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
  }
}

@media (orientation: landscape) and (max-height: 500px) {
  .landscape-compact {
    padding-top: max(8px, env(safe-area-inset-top));
    padding-bottom: max(8px, env(safe-area-inset-bottom));
  }
}

/* Fix for iOS Safari viewport issues */
@supports (-webkit-touch-callout: none) {
  .ios-viewport-fix {
    min-height: -webkit-fill-available;
  }
}
